# Epic Title: Save and Resume Incomplete Applications

{% extends "base.html" %}

{% block title %}
Application
{% endblock %}

{% block nav %}
<ul>
    <li><a href="/dashboard">Dashboard</a></li>
    <li><a href="/accounts">Accounts</a></li>
    <li><a href="/application">Application</a></li>
    <li><a href="/history">History</a></li>
    <li><a href="/settings">Settings</a></li>
</ul>
{% endblock %}

{% block content %}
<h2>Application</h2>
<form id="applicationForm" action="{{ url_for('application_controller.save_application') }}" method="post">
    <div>
        <label for="data">Application Data:</label>
        <textarea id="data" name="data" rows="10" cols="50"></textarea>
    </div>
    <div>
        <button type="button" onclick="saveApplication()">Save</button>
        <button type="button" onclick="resumeApplication()">Resume</button>
    </div>
</form>

<script>
    function saveApplication() {
        const data = document.getElementById('data').value;
        fetch('{{ url_for("application_controller.save_application") }}', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({data: data})
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message);
        });
    }

    function resumeApplication() {
        fetch('{{ url_for("application_controller.resume_application", app_id=1) }}')  // Assuming application ID is 1 for demo purpose
        .then(response => response.json())
        .then(data => {
            document.getElementById('data').value = data.data;
        });
    }
</script>
{% endblock %}


# File 6: App Update to Register Application Controller in app.py